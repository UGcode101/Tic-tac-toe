<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <title>Tic Tac Toe</title>
   <style>
      table {
          border-collapse: collapse;
          margin: 20px 0;
      }

      table, th, td {
          border: 1px solid black;
      }

      td {
          width: 50px;
          height: 50px;
          text-align: center;
          font-size: 24px;
          cursor: pointer;
      }

      td:hover {
          background-color: lightgrey;
      }

      .winner {
          font-weight: bold;
          color: green;
      }
   </style>
</head>
<body>
<h1>Tic Tac Toe</h1>
<h2 th:text="'Current Player: ' + ${game.currentPlayer}"></h2>
<form th:action="@{/tictactoe/move}" method="post">
   <input type="hidden" name="gameId" th:value="${gameId}" />
   <table>
      <tr>
         <td th:onclick="'submitMove(0,0)'"
             th:utext="${game.board[0][0] ?: ''}"></td>
         <td th:onclick="'submitMove(0,1)'"
             th:utext="${game.board[0][1] ?: ''}"></td>
         <td th:onclick="'submitMove(0,2)'"
             th:utext="${game.board[0][2] ?: ''}"></td>
      </tr>
      <tr>
         <td th:onclick="'submitMove(1,0)'"
             th:utext="${game.board[1][0] ?: ''}"></td>
         <td th:onclick="'submitMove(1,1)'"
             th:utext="${game.board[1][1] ?: ''}"></td>
         <td th:onclick="'submitMove(1,2)'"
             th:utext="${game.board[1][2] ?: ''}"></td>
      </tr>
      <tr>
         <td th:onclick="'submitMove(2,0)'"
             th:utext="${game.board[2][0] ?: ''}"></td>
         <td th:onclick="'submitMove(2,1)'"
             th:utext="${game.board[2][1] ?: ''}"></td>
         <td th:onclick="'submitMove(2,2)'"
             th:utext="${game.board[2][2] ?: ''}"></td>
      </tr>
   </table>
   <input type="hidden" name="x" id="x" />
   <input type="hidden" name="y" id="y" />
</form>
<script>
   function submitMove(x, y) {
       document.getElementById('x').value = x;
       document.getElementById('y').value = y;
       document.forms[0].submit();
   }
</script>
<script>
   if (${game.isDraw()}) {
       alert("The game is a draw. Please wait while we redirect you.");
   }
</script>
</body>
</html>
